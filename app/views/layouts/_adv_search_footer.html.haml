- url = advanced_searches_load_choice_path
- url2 = advanced_searches_name_typed_path
- report_expressions = MiqReport.get_expressions_by_model(@edit[@expkey][:exp_model])
- mode ||= "search"

#adv_search_footer
  - if mode == "search"
    - if @edit[@expkey][:exp_search_expressions].blank? && report_expressions.blank?
      = button_tag(_("Load..."),
                   :class => "btn btn-primary btn-disabled pull-left",
                   :alt   => t = _("No saved filters or report filters are available to load"),
                   :title => t)

    - else
      = link_to(_("Load..."),
                 advanced_searches_button_path(:button => 'load'),
                 :alt    => t = _("Load a filter"),
                 :class  => "btn btn-primary pull-left",
                 :remote => true,
                 :title  => t)

    - if @edit[@expkey][:exp_table].flatten.first == "???"
      = button_tag(_("Apply"), :class => "btn btn-primary btn-disabled")
    - else
      = link_to(_("Apply"),
                advanced_searches_button_path(:button => 'apply', :target_controller => target_controller),
                "data-miq_sparkle_on"  => true,
                "data-miq_sparkle_off" => true,
                :class                 => "btn btn-primary",
                :alt                   => t = _("Apply the current filter"),
                :remote                => true,
                :title                 => t)
    - if @edit[@expkey][:selected] && @edit[@expkey][:selected][:typ] != "default" &&
    -    @edit[@expkey][:selected][:id] != 0
      - if (session[:userrole] == "super_administrator" || session[:userrole] == "administrator") ||
      -    (session[:userrole] != "super_administrator" && session[:userrole] != "administrator" &&
      -    @edit[@expkey][:selected][:typ] == "user")
        = link_to(_("Delete"),
                  advanced_searches_button_path(:button => 'delete'),
                  :confirm => _("Delete the %{model} filter named %{filter}?") % {:model  => ui_lookup(:model => @edit[@expkey][:exp_mode]),
                                                                                  :filter => @edit[:adv_search_name]},
                  :class   => "btn btn-danger",
                  :alt     => _("Delete the filter named %s") % @edit[@expkey][:selected][:description],
                  :remote  => true,
                  :title   => _("Delete the filter named %s" % @edit[@expkey][:selected][:description]))
    - if @edit[@expkey][:exp_table].flatten.first == "???"
      = button_tag(_("Save..."), :class => "btn btn-primary btn-disabled")
    - else
      = link_to(_("Save..."),
                advanced_searches_button_path(:button => 'save'),
                :class  => "btn btn-primary",
                :alt    => t = _("Save the current filter"),
                :remote => true,
                :title  => t)
    - if @edit[@expkey][:exp_table].flatten.first == "???"
      = button_tag("Reset", :class => "btn btn-default btn-disabled")
    - else
      = link_to(_("Reset"),
                advanced_searches_button_path(:button => 'reset'),
                :class => "btn btn-default",
                :alt   => t = _("Reset the filter"),
                :remote => true,
                :title  => t)
  - elsif mode == "load"
    - if @edit[@expkey][:exp_chosen_report].nil? && @edit[@expkey][:exp_chosen_search].nil?
      = button_tag(_("Load"),
                   :class => "btn btn-primary btn-disabled pull-left",
                   :alt   => t = _("Choose a saved filter or report filter to load"),
                   :title => t)
    - else
      = link_to(_("Load"),
                advanced_searches_button_path(:button => 'loadit'),
                :class  => "btn btn-primary pull-left",
                :alt    => t = _("Load the filter shown above"),
                :remote => true,
                :title  => t)
    = link_to(_("Cancel"),
              advanced_searches_button_path(:button => 'cancel'),
              :class => "btn btn-primary",
              :alt   => t = _("Cancel the load"),
              :remote => true,
              :title  => t)
  - elsif mode == "save"
    = link_to(_("Save"),
                advanced_searches_button_path(:button => 'saveit'),
                :class => "btn btn-primary",
                :alt   => t = _("Save the current search"),
                :remote => true,
                :title  => t)
    = link_to(_("Cancel"),
              advanced_searches_button_path(:button => 'cancel'),
              :class => "btn btn-default",
              :alt   => t = _("Cancel the save"),
              :remote => true,
              :title  => t)
