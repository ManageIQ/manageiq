- url = url_for(:action => 'cb_tier_form_field_changed', :id => "#{@sb[:tier].id || "new"}")
#form_div
  %h3
    = _('Basic Info')
  .form-horizontal.static
    .form-group
      %label.col-md-2.control-label
        = _('Name')
      .col-md-8
        = text_field_tag("name", @edit[:new][:name],
                        :maxlength => MAX_NAME_LEN, "data-miq_observe" => {:interval => '.5', :url => url}.to_json,
                        :class => "form-control")
        = javascript_tag(javascript_focus('name'))
  .form-horizontal.static
    .form-group
      %label.col-md-2.control-label
        = _('Description')
      .col-md-8
        = text_field_tag("description", @edit[:new][:description],
                        :maxlength => MAX_NAME_LEN, "data-miq_observe" => {:interval => '.5', :url => url}.to_json,
                        :class => "form-control")
        = javascript_tag(javascript_focus('description'))
  .form-horizontal.static
    .form-group
      %label.col-md-2.control-label
        = _('Rate below first tier')
      .col-md-8
        = text_field_tag("rate_below", @edit[:new][:rate_below],
                        :maxlength => MAX_NAME_LEN, "data-miq_observe" => {:interval => '.5', :url => url}.to_json,
                        :class => "form-control")
        = javascript_tag(javascript_focus('rate_below'))
  .form-horizontal.static
    .form-group
      %label.col-md-2.control-label
        = _('Rate above last tier')
      .col-md-8
        = text_field_tag("rate_above", @edit[:new][:rate_above],
                        :maxlength => MAX_NAME_LEN, "data-miq_observe" => {:interval => '.5', :url => url}.to_json,
                        :class => "form-control")
        = javascript_tag(javascript_focus('rate_above'))
  %hr

  %h3= _('Tier Details')
  %table.table.table-bordered
    %thead
      %tr
        %th= _('Description')
        %th= _('Start')
        %th= _('End')
        %th= _('Tier rate')
    %tbody
      - @sb[:tier_details].each_with_index do |r, i|
        /%tr
        /  %td.active{:colspan => "6"} &nbsp;
        %tr
          %td
            = text_field_tag("start_#{i}", @edit[:new][:details][i][:description],
              :maxlength => MAX_NAME_LEN, "data-miq_observe" => {:interval => '.5', :url => url}.to_json)
          %td
            = text_field_tag("start_#{i}", @edit[:new][:details][i][:start],
              :maxlength => MAX_NAME_LEN, "data-miq_observe" => {:interval => '.5', :url => url}.to_json)
          %td{:align => 'right'}
            = text_field_tag("end_#{i}", @edit[:new][:details][i][:end],
              :maxlength => MAX_NAME_LEN, "data-miq_observe" => {:interval => '.5', :url => url}.to_json)
          %td
            = text_field_tag("tier_rate_#{i}", @edit[:new][:details][i][:tier_rate],
              :maxlength => MAX_NAME_LEN, "data-miq_observe" => {:interval => '.5', :url => url}.to_json)
