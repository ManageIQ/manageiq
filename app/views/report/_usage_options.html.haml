- url = url_for(:action => 'usage_option_chooser')
#usage_options_div
  %fieldset
    %h3
      = _('Options')
    .form-horizontal
      .form-group
        %label.control-label.col-md-2
          = _("Date")
        - if @usage_options[:date]
          .col-md-8
            = datepicker_input_tag("miq_date_1", @usage_options[:date],
              :readonly               => "true",
              "data-miq_sparkle_on"   => true,
              "data-miq_sparkle_off"  => true,
              "data-miq_observe_date" => {:url => url}.to_json)
          %label.control-label.col-md-2
            = _("Period")
          .col-md-8
            = select_tag("usage_typ",
              options_for_select([[_("Day"), "daily"], [_("Hour"), "hourly"]], @usage_options[:typ]),
              "data-miq_sparkle_on"  => true,
              "data-miq_sparkle_off" => true,
              :class                 => "selectpicker")
            :javascript
              miqInitSelectPicker();
              miqSelectPickerEvent("usage_typ", "#{url}")
          - unless @usage_options[:typ] == "daily"
            %span#day_span
              %label.control-label.col-md-2
                = _('Hour')
              .col-md-8
                = select_tag("usage_hour",
                  options_for_select(@usage_options[:hours], @usage_options[:hour]),
                  "data-miq_sparkle_on"  => true,
                  "data-miq_sparkle_off" => true,
                  :class                 => "selectpicker")
                :javascript
                  miqSelectPickerEvent("usage_hour", "#{url}")
        - else
          .col-md-8
            = datepicker_input_tag("miq_date_1", @usage_options[:date],
              :readonly               => "true",
              "data-miq_sparkle_on"   => true,
              "data-miq_sparkle_off"  => true,
              "data-miq_observe_date" => {:url => url}.to_json)
          - unless @usage_options[:typ] == "daily"
            %span#day_span
              %label.control-label.col-md-2
                = _('Hour')
              .col-md-8
                = select_tag("usage_hour",
                  options_for_select(@usage_options[:hours], @usage_options[:hour]),
                  "data-miq_sparkle_on"  => true,
                  "data-miq_sparkle_off" => true,
                  :class                 => "selectpicker")
                :javascript
                  miqSelectPickerEvent("usage_hour", "#{url}")

    - if @usage_options[:date]
      %tr
        %label.control-label.col-md-2
          = _('Category')
        .col-md-8
          = select_tag("usage_cat",
            options_for_select(Array(@usage_options[:cats].invert).sort_by(&:first), @usage_options[:cat]),
            "data-miq_sparkle_on"  => true,
            "data-miq_sparkle_off" => true,
            :class                 => "selectpicker")
          :javascript
            miqSelectPickerEvent("usage_cat", "#{url}")
      - if @usage_options[:cat]
        %label.control-label.col-md-2
        .col-md-8
          = select_tag("usage_tag",
            options_for_select(Array(@usage_options[:tags].invert).sort_by(&:first), @usage_options[:tag]),
            "data-miq_sparkle_on"  => true,
            "data-miq_sparkle_off" => true,
            :class                 => "selectpicker")
          :javascript
            miqSelectPickerEvent("usage_tag", "#{url}")
    = _("* Dates/Times on this page are based on UTC Time.")
